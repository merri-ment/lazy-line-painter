/*
 * Lazy Line Painter
 * SVG Stroke animation.
 *
 * https://github.com/camoconnell/lazy-line-painter
 * http://www.camoconnell.com
 *
 * Licensed under the MIT license.
 *
 */
(function(e,t,n){"use strict";var r="lazyLinePainter";var i={init:function(t){return this.each(function(){var n=e(this);var i=n.data(r);n.addClass("lazy-line");if(!i){var s=e.extend({width:null,height:null,strokeWidth:2,strokeColor:"#000",strokeOverColor:null,strokeCap:"round",strokeJoin:"round",strokeOpacity:1,arrowEnd:"none",strokeDash:null,onComplete:null,delay:null,overrideKey:null,drawSequential:true,speedMultiplier:1,reverse:false,responsive:false},t);var o=s.overrideKey?s.overrideKey:n.attr("id").replace("#","");var u=s.svgData[o].dimensions.width;var a=s.svgData[o].dimensions.height;s.svgData=s.svgData[o].strokepath;if(s.width===null){s.width=u}if(s.height===null){s.height=a}if(!s.responsive){n.css({width:s.width,height:s.height})}var f=l({viewBox:"0 0 "+u+" "+a,preserveAspectRatio:"xMidYMid"});s.svg=e(f);n.append(s.svg);n.data(r,s)}})},paint:function(){return this.each(function(){var t=e(this);var n=t.data(r);var i=function(){n.paths=[];n.longestDuration=0;n.playhead=0;var e=0;for(var t=0;t<n.svgData.length;t++){var r=n.svgData[t].duration*n.speedMultiplier;e+=r}for(var t=0;t<n.svgData.length;t++){var i=a(n,t);var s=i.getTotalLength();i.style.strokeDasharray=s+" "+s;i.style.strokeDashoffset=s;i.style.display="block";i.getBoundingClientRect();var r=n.svgData[t].duration*n.speedMultiplier;if(r>n.longestDuration){n.longestDuration=r}var u;if(n.reverse){e-=r;u=e}else{u=n.playhead}n.paths.push({duration:r,drawStartTime:u,path:i,length:s});n.playhead+=r}n.totalDuration=n.drawSequential?n.playhead:n.longestDuration;n.rAF=requestAnimationFrame(function(e){o(e,n)})};if(n.delay===null){i()}else{setTimeout(i,n.delay)}})},pauseResume:function(){return this.each(function(){var t=e(this).data(r);if(!t.paused){t.paused=true;cancelAnimationFrame(t.rAF)}else{t.paused=false;requestAnimationFrame(function(e){s(e,t)})}})},erase:function(){return this.each(function(){var t=e(this);t.removeData(r);t.find("svg").empty()})},destroy:function(){return this.each(function(){var t=e(this);t.removeData(r);t.remove()})}};var s=function(e,t){t.startTime=e-t.elapsed_time;requestAnimationFrame(function(e){o(e,t)})};var o=function(e,t){if(t.startTime==null){t.startTime=e}t.elapsed_time=e-t.startTime;for(var n=0;n<t.paths.length;n++){var r;if(t.drawSequential){r=t.elapsed_time-t.paths[n].drawStartTime;if(r<0)r=0}else{r=t.elapsed_time}if(r<t.paths[n].duration&&r>0){var i=r/t.paths[n].duration*t.paths[n].length;if(t.reverse||t.svgData[n].reverse){t.paths[n].path.style.strokeDashoffset=-t.paths[n].length+i}else{t.paths[n].path.style.strokeDashoffset=t.paths[n].length-i}}else if(r>t.paths[n].duration){t.paths[n].path.style.strokeDashoffset=0}}if(t.elapsed_time<t.totalDuration){t.rAF=requestAnimationFrame(function(e){o(e,t)})}else{if(t.onComplete!=null)t.onComplete()}};var u=function(e,t){var n={stroke:!t.strokeColor?e.strokeColor:t.strokeColor,"fill-opacity":0,"stroke-dasharray":!t.strokeDash?e.strokeDash:t.strokeDash,"stroke-opacity":!t.strokeOpacity?e.strokeOpacity:t.strokeOpacity,"stroke-width":!t.strokeWidth?e.strokeWidth:t.strokeWidth,"stroke-linecap":!t.strokeCap?e.strokeCap:t.strokeCap,"stroke-linejoin":!t.strokeJoin?e.strokeJoin:t.strokeJoin};return n};var a=function(t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","path");var i=e(r);t.svg.append(i);i.attr(f(t,t.svgData[n]));return r};var f=function(e,t){var n={d:t.path,stroke:!t.strokeColor?e.strokeColor:t.strokeColor,"fill-opacity":0,"stroke-dasharray":!t.strokeDash?e.strokeDash:t.strokeDash,"stroke-opacity":!t.strokeOpacity?e.strokeOpacity:t.strokeOpacity,"stroke-width":!t.strokeWidth?e.strokeWidth:t.strokeWidth,"stroke-linecap":!t.strokeCap?e.strokeCap:t.strokeCap,"stroke-linejoin":!t.strokeJoin?e.strokeJoin:t.strokeJoin,"arrow-end":!t.arrowEnd?e.arrowEnd:t.arrowEnd,markerWidth:"4",markerHeight:"3",orient:"auto"};return n};var l=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttributeNS(null,"viewBox",e.viewBox);t.setAttributeNS(null,"preserveAspectRatio",e.preserveAspectRatio);t.setAttribute("xmlns","http://www.w3.org/2000/svg");return t};e.fn.lazylinepainter=function(e){if(i[e]){return i[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return i.init.apply(this,arguments)}else{}}})(jQuery,window)