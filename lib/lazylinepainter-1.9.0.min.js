!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("LazyLinePainter",[],e):"object"==typeof exports?exports.LazyLinePainter=e():t.LazyLinePainter=e()}(window,function(){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.easing={easeLinear:function(t,e,o,n){return o*t/n+e},easeInQuad:function(t,e,o,n){return o*(t/=n)*t+e},easeOutQuad:function(t,e,o,n){return-o*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,o,n){return(t/=n/2)<1?o/2*t*t+e:-o/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,o,n){return o*(t/=n)*t*t+e},easeOutCubic:function(t,e,o,n){return o*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,o,n){return(t/=n/2)<1?o/2*t*t*t+e:o/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,o,n){return o*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,o,n){return-o*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,o,n){return(t/=n/2)<1?o/2*t*t*t*t+e:-o/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,o,n){return o*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,o,n){return o*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,o,n){return(t/=n/2)<1?o/2*t*t*t*t*t+e:o/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,o,n){return-o*Math.cos(t/n*(Math.PI/2))+o+e},easeOutSine:function(t,e,o,n){return o*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,o,n){return-o/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,o,n){return 0===t?e:o*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,o,n){return t===n?e+o:o*(1-Math.pow(2,-10*t/n))+e},easeInOutExpo:function(t,e,o,n){return 0===t?e:t===n?e+o:(t/=n/2)<1?o/2*Math.pow(2,10*(t-1))+e:o/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,o,n){return-o*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,o,n){return o*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,o,n){return(t/=n/2)<1?-o/2*(Math.sqrt(1-t*t)-1)+e:o/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInBack:function(t,e,o,n,s){return void 0===s&&(s=1.70158),o*(t/=n)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,o,n,s){return void 0===s&&(s=1.70158),o*((t=t/n-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,o,n,s){return void 0===s&&(s=1.70158),(t/=n/2)<1?o/2*(t*t*((1+(s*=1.525))*t-s))+e:o/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+e},easeInBounce:function(t,e,o,n){return o-this.easing.easeOutBounce(n-t,0,o,n)+e},easeOutBounce:function(t,e,o,n){return(t/=n)<1/2.75?o*(7.5625*t*t)+e:t<2/2.75?o*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?o*(7.5625*(t-=2.25/2.75)*t+.9375)+e:o*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,o,n){return t<n/2?.5*this.easing.easeInBounce(2*t,0,o,n)+e:.5*this.easing.easeOutBounce(2*t-n,0,o,n)+.5*o+e}},this.className="lazylinepainter",this.rAF=null,this.$el=document.getElementById(e.id),this.$el.classList.add(this.className),this.options=this._getOptions(e);var o=this.options.delay+this._getTotalDuration(this.options.paths),n=this.options.delay+this._getLongestDuration(this.options.paths);this.options.totalDuration=this.options.drawSequential?o:n,this._setupPaths(),this.options.totalDuration*=this.options.speedMultiplier,this.resize()}return function(t,e,o){e&&n(t.prototype,e),o&&n(t,o)}(t,[{key:"paint",value:function(){var t=this;this.erase(),this.rAF=requestAnimationFrame(function(e){t._paint(e)}),null!==this.options.onStart&&this.options.onStart()}},{key:"pause",value:function(){this.options.paused||(this.options.paused=!0,cancelAnimationFrame(this.rAF))}},{key:"resume",value:function(){var t=this;this.options.paused&&(requestAnimationFrame(function(e){t.adjustStartTime(e)}),this.options.paused=!1)}},{key:"erase",value:function(){this.options.startTime=null,this.options.elapsedTime=null,cancelAnimationFrame(this.rAF),this.options.onStrokeCompleteDone=!1,this.options.paused=!1;for(var t=0;t<this.options.paths.length;t++){var e=this.options.paths[t];e.el.style.strokeDashoffset=e.length,e.onStrokeCompleteDone=!1,e.onStrokeStartDone=!1}}},{key:"destroy",value:function(){for(this.options=null;this.$el.firstChild;)this.$el.removeChild(this.$el.firstChild);this.$el.classList.remove(this.className)}},{key:"set",value:function(t){this.options.progress=t,this._updatePaths()}},{key:"get",value:function(){return this.options}},{key:"resize",value:function(){this.options.offset={left:this.$el.offsetLeft,top:this.$el.offsetTop};for(var t=0;t<this.options.paths.length;t++)this._updatePosition(this.options.paths[t])}},{key:"_getOptions",value:function(t){var e=Object.assign({strokeWidth:2,strokeDash:null,strokeColor:"#000",strokeOverColor:null,strokeCap:"round",strokeJoin:"round",strokeOpacity:1,onComplete:null,onUpdate:null,onStart:null,onStrokeStart:null,onStrokeComplete:null,delay:0,ease:null,overrideKey:null,drawSequential:!0,speedMultiplier:1,reverse:!1,paused:!1,progress:0,longestDuration:0,playhead:0},t),o=e.overrideKey?e.overrideKey:t.id;return e.width=e.svgData[o].dimensions.width,e.height=e.svgData[o].dimensions.height,e.paths=e.svgData[o].strokepath,e.svg=this._getSVGElement("0 0 "+e.width+" "+e.height),e}},{key:"_setupPaths",value:function(){for(var t=this.options.reverse?this.options.totalDuration:0,e=0;e<this.options.paths.length;e++){var o=this.options.paths[e];o.progress=0,o.index=e,o.el=this._getPath(o),o.length=this._getPathLength(o.el),o.delay=o.delay||0,o.duration=o.duration,o.positions=this._getPathPoints(o.el,o.length),o.ease=o.ease||null,o.el.style.strokeDasharray=this._getStrokeDashArray(o,o.length),o.el.style.strokeDashoffset=o.length,o.el.style.display="block",o.el.getBoundingClientRect(),o.onStrokeStart=o.onStrokeStart||null,o.onStrokeComplete=o.onStrokeComplete||null,o.onStrokeStartDone=!1,o.onStrokeCompleteDone=!1,o.onStrokeUpdate=o.onStrokeUpdate||null;var n=void 0,s=o.duration/this.options.totalDuration;n=this.options.reverse?(t-=o.duration)/this.options.totalDuration:(t=this.options.drawSequential?this.options.playhead+this.options.delay:o.delay+this.options.delay)/this.options.totalDuration,o.startTime=t,o.startProgress=n,o.durationProgress=s,this.options.playhead+=o.duration+o.delay}}},{key:"adjustStartTime",value:function(t){var e=this;this.options.startTime=t-this.options.elapsedTime,requestAnimationFrame(function(t){e._paint(t)})}},{key:"_paint",value:function(t){var e=this;this.options&&(this.options.startTime||(this.options.startTime=t),null!==this.options.onUpdate&&this.options.onUpdate(),this.options.elapsedTime=t-this.options.startTime,this.options.progress=this._getProgress(this.options.totalDuration,this.options.startTime,this.options.elapsedTime,this.options.ease),this._updatePaths(),this.options.progress<1?this.rAF=requestAnimationFrame(function(t){e._paint(t)}):null!==this.options.onComplete&&this.options.onComplete())}},{key:"_updatePaths",value:function(){for(var t=0;t<this.options.paths.length;t++){var e=this.options.paths[t],o=this._getElapsedProgress(e);e.progress=this._getProgress(1,0,o,e.ease),this._setLine(e),this._updatePosition(e),this._updateStrokeCallbacks(e)}}},{key:"_getElapsedProgress",value:function(t){var e;return this.options.progress>t.startProgress&&this.options.progress<t.startProgress+t.durationProgress?e=(this.options.progress-t.startProgress)/t.durationProgress:this.options.progress>=t.startProgress+t.durationProgress?e=1:this.options.progress<=t.startProgress&&(e=0),e}},{key:"_getProgress",value:function(t,e,o,n){var s;return o>0&&o<t?s=n?this.easing[n](o,0,1,t):o/t:o>=t?s=1:o<=e&&(s=0),s}},{key:"_setLine",value:function(t){var e=t.el,o=t.progress*t.length;this.options.reverse||t.reverse?e.style.strokeDashoffset=-t.length+o:e.style.strokeDashoffset=t.length-o}},{key:"_updateStrokeCallbacks",value:function(t){1===t.progress?(this.options.onStrokeComplete&&!t.onStrokeCompleteDone&&(this.options.onStrokeComplete(t),t.onStrokeComplete||(t.onStrokeCompleteDone=!0)),t.onStrokeComplete&&!t.onStrokeCompleteDone&&(t.onStrokeComplete(t),t.onStrokeCompleteDone=!0)):t.progress>1e-5&&(this.options.onStrokeStart&&!t.onStrokeStartDone&&(this.options.onStrokeStart(t),t.onStrokeStart||(t.onStrokeStartDone=!0)),t.onStrokeStart&&!t.onStrokeStartDone&&(t.onStrokeStart(t),t.onStrokeStartDone=!0),t.onStrokeUpdate&&t.onStrokeUpdate(t))}},{key:"_updatePosition",value:function(t){var e=Math.round(t.progress*(t.length-1)),o=t.positions[e];t.position={x:this.options.offset.left+o.x,y:this.options.offset.top+o.y}}},{key:"_getTotalDuration",value:function(t){for(var e=0,o=0;o<t.length;o++){var n=t[o].delay||0;e+=t[o].duration+n}return e}},{key:"_getLongestDuration",value:function(t){for(var e=0,o=0;o<t.length;o++){var n=t[o].delay||0;t[o].duration+n>e&&(e=t[o].duration+n)}return e}},{key:"_getPath",value:function(t){var e=this.options.svg.getElementById(t.id);return this._setAttributes(e,t),e}},{key:"_getPathLength",value:function(t){return Math.ceil(t.getTotalLength())}},{key:"_getPathPoints",value:function(t,e){for(var o=[],n=0;n<e;n++){var s=t.getPointAtLength(n);o.push({x:s.x,y:s.y})}return o}},{key:"_setAttributes",value:function(t,e){t.setAttributeNS(null,"d",e.path),t.setAttributeNS(null,"stroke",e.strokeColor?e.strokeColor:this.options.strokeColor),t.setAttributeNS(null,"fill","none"),t.setAttributeNS(null,"stroke-opacity",e.strokeOpacity?e.strokeOpacity:this.options.strokeOpacity),t.setAttributeNS(null,"stroke-width",e.strokeWidth?e.strokeWidth:this.options.strokeWidth),t.setAttributeNS(null,"stroke-linecap",e.strokeCap?e.strokeCap:this.options.strokeCap),t.setAttributeNS(null,"stroke-linejoin",e.strokeJoin?e.strokeJoin:this.options.strokeJoin)}},{key:"_getSVGElement",value:function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttributeNS(null,"viewBox",t),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e}},{key:"_getStrokeDashArray",value:function(t,e){return t.strokeDash?this._getStrokeDashString(t.strokeDash,e):this.options.strokeDash?this._getStrokeDashString(this.options.strokeDash,e):e+" "+e}},{key:"_getStrokeDashString",value:function(t,e){for(var o,n,s="",i=t.split(","),r=0,a=i.length-1;a>=0;a--)r+=Number(i[a]);n=e-(o=Math.floor(e/r))*r;for(var u=o-1;u>=0;u--)s+=t+", ";return(s+n+", "+e).split(",").join("px,")+"px"}}]),t}();window.LazyLinePainter=s,e.LazyLinePainter=s;var i=s;e.default=i,t.exports=e.default}])});
//# sourceMappingURL=lazylinepainter-1.9.0.min.js.map